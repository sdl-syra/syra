<%- model_class = Service -%>
<div class="page-header">
  <h1>Service</h1>
</div>

<dl class="dl-horizontal" style="float : left">
  <dt><strong><%= model_class.human_attribute_name(:title) %> : </strong></dt>
  <dd><%= @service.title %></dd>
  <dt><strong><%= model_class.human_attribute_name(:isGiven) %> : </strong></dt>
  <dd><%= @service.isGiven %></dd>
  <dt><strong><%= model_class.human_attribute_name(:category) %> : </strong></dt>
  <dd><a href="<%= category_path(@service.category) %>"><%= @service.category.name %></a></dd>
  <dt><strong><%= model_class.human_attribute_name(:description) %> : </strong></dt>
  <dd><%= @service.description %></dd>
  <dt><strong><%= model_class.human_attribute_name(:disponibility) %> : </strong></dt>
  <% if @service.disponibility.nil? or @service.disponibility=="" %>
  	<dd> Non renseignées  </dd>
  <% else %>
  	<dd><%= @service.disponibility %></dd>
  <% end %>
  <dt><strong><%= model_class.human_attribute_name(:price) %> : </strong></dt>
  <dd><%= @service.price %></dd>
  <dt><strong><%= model_class.human_attribute_name(:address) %> : </strong></dt>



  <!-- A modifier lors de la modif du type de l'adresse -->
  <% if @service.address.nil? or @service.address.label=="" %>
  	<dd> Non renseignée </dd>
  <% else %>
  	<dd><%= @service.address.label %></dd>
  <% end %>
  
  
  
  <dt><strong><%= model_class.human_attribute_name(:user) %> : </strong></dt>
  <% if @service.user.nil?  %>
  	<dd> Non renseigné  </dd>
  <% else %>
  	<% username = @service.user.name + ' ' + @service.user.lastName%>
  	<dd><%= link_to username, user_path(@service.user) %></dd>
  <% end %>
  <dt><strong><%= model_class.human_attribute_name(:isFinished) %> : </strong></dt>
  <dd><%= @service.isFinished %></dd>
</dl>

<div class="form-image">
 <dt><strong><%= model_class.human_attribute_name(:image) %> : </strong></dt>
  		<%= # image_tag @service.image_url(:thumb).to_s 
		%>
	  	<% if @service.image_url=="/assets/image/image_service_default.png"%>
   	 		<dd><img src='/assets/image/thumb_image_service_default.png' alt='Image not found' /></dd>
   	 	<%else%>
   	 		<dd>
   	 			<!-- <a href='<%=@service.image_url(:thumb).to_s%>' target="_blank"><img src='<%= @service.image_url(:thumb).to_s %>' alt='Image not found' /></a> -->
   	 			<img src='<%= @service.image_url(:thumb).to_s %>' alt='Image not found' />
   	 		</dd>
   	 	<%end%>
</div>

<div class="form-actions">
	<% if @service.user == current_user %>
		<%= link_to t('.edit', :default => t("helpers.links.edit")),
			edit_service_path(@service), :class => 'btn' %>
		<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
			service_path(@service),
			:method => 'delete',
			:data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
			:class => 'btn btn-danger' %>
	<%end%>
	<%= link_to t('.back', :default => t("helpers.links.back")),
			services_path, :class => 'btn'  %>
</div>

<div class="form-actions">
  <% if @service.user != current_user %>
    <%= link_to 'Faire une proposition', new_proposition_path(:service => @service.id)%>
<%end%>
</div>
<% if @service.address != nil then %>
  
  <%= javascript_tag do %>
  
  window.onload = function() {
  var myLatLng = new google.maps.LatLng(<%= @service.address.y %>,<%= @service.address.x %>);

  var myMapOptions = {
    zoom:16,
    center:myLatLng,
    mapTypedId: google.maps.MapTypeId.ROADMAP
  };

  var myMap = new google.maps.Map(
    document.getElementById('map'),
    myMapOptions
    );

  var myMarker = new google.maps.Marker({
    position: myLatLng,
    map: myMap,
    title: "<%= @service.title %>"
  });

  }



  <% end %>
<% end %>
<div id="map"> </div>
